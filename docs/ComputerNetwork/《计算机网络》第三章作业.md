# 《计算机网络》第三章作业

## 3-01

**答：**

- 链路（物理链路）：一个节点到另一相邻节点的一段物理线路（中间无交换节点）
- 数据链路（逻辑链路）：物理链路上加上必要的通信协议（常使用网络适配器协调实现协议的软硬件）

“电路接通了”说明物理链路接通了，并不代表“数据链路接通了”，因为有可能节点间并没有协议；“数据链路接通了”说明硬件和协议都准备好了，那么一定“电路接通了”。

## 3-04

**答：**

- 封装成帧：在数据前后添加首部和尾部（包含控制信息）形成一帧。这样可以保证上层能识别帧的开始和结束。
- 透明传输：上层交来的数据不论何种比特组合都能正确传输。由于帧上有开始和结束的定界符，所以有可能在比特流中可能有与开始和结束定界符相同的比特组合，若不解决这个问题则会有帧定界错误的问题。
- 差错检测：数据链路层对收到的数据进行差错检测（不一定要进行修复）可以有效避免资源的浪费（避免遇到错误数据还继续发送）。

## 3-07

**答：**由生成多项式可知除数$P=10011$（位数为5），因此被除数还需在末尾加上4位0，使用CRC得到余数为$11010110110000\% 10011=1110$。

- 若数据变为了$1101011010$，先将余数拼接后为$11010110101110$，那么$11010110101110 \% 10011= 0011$，因为余数不为0，所以此帧错误。
- 若数据变为了$1101011000$，先将余数拼接后为$11010110001110$，那么$11010110001110 \% 10011= 0101$，因为余数不为0，所以此帧错误。

采用CRC检验后，数据链路层的传输并没有变为可靠的传输，因为接收方检测到错误后只是简单的丢弃，而没有进行修复，不能保证发送端和接收端的数据都是一样的。

## 3-09

**答：**由字节填充的规则可知：

- `0x7D 0x5E`对应的是`0x7E`；
- `0x7D 0x5D`对应的是`0x7D`；
- `0x7D P`对应的是`P-0x20`；

所以将题中的数据按照上述规则转化后可以得到数据为`7E FE 27 7D 7D 65 7E`。

## 3-10

**答：**根据PPP协议中零比特填充规则（发送端遇到5个1就添加一个0，接收端遇到5个1就去掉后面一个0）可知：

- 经过零比特填充后的数据为`01011111011111000 `；
- 删除加入的零比特后数据为`0001101111111111110`。

## 3-13

**答：**局域网的最主要的特点是：网络为一个单位所拥有，且地理范围和站点数目均有限，相对早期广域网有更高的数据率、更低的时延和更低的误码率。由于广域网的范围大、网络节点多，采用广播会造成很大的资源浪费，还会降低信道的有效利用率，因此不使用广播；而局域网范围小，节点少，采用广播十分方便，并且也不会有太大的资源浪费，因此局域网采用广播信道方式。

## 3-16

**答：**数据率为$10\text{Mbit}$的以太网上每秒可以传输$10\times 10^6$个码元，而由于以太网采用曼彻斯特编码，所以原来的一个码元会对应曼彻斯特编码下的两个码元，因此在物理媒体上的码元传输率为$20\times 10^6$码元/秒。

## 3-20

**答：**端到端传播时延为$\tau = 1 \text{km} / (2\times 10^5 \text{km/s})=5\times 10^{-6}\text{s}$，因此争用期为$2\tau=1\times 10^{-5}\text{s}$，所以在此时间内要发送$2\tau \times 1 \times 10^9 \text{bit/s}=10^4\text{bit}=1250字节$，所以此协议的最短帧长为$1250$字节。

## 3-24

**答：**由于A发送的帧为以太网所容许的最短的帧，因此MAC帧大小为$64\times 8=512\text{bit}$，再加上前同步码和帧定界符（$8\times8=64\text{bit}$），因此A的发送时延为$512+64=576$比特时间。设A发送的时刻为0，设B发送的时刻为$x$，由于题中要求在A发送结束前B也要发送一帧，因此B发送时还没有检测到碰撞，因此$0 \leq x < 225$，所以A检测到碰撞的时间为$x+225$。由于$x+225 < 450 < 576$，所以A在检测到和B发生碰撞之前不能把自己的数据发送完毕。

如果A在发送完毕前并没有检测到碰撞，那么$x+255 > 576$，即$x>321>225$，这说明B发送数据前就已经接收到了来自A的数据，所以A所发送的帧不会和B发送的帧发生碰撞。

## 3-25

**答：**$10\text{Mbit}$的以太网上争用期时间为$512$比特时间，帧间最小间隔为$96$比特时间。题中站点A的状态如下：

1. A在传输完干扰信号后开始检测信道，直到信道空闲（B的干扰信号消失，即$273+225=498$比特时间）；
2. 受以太网帧间最小间隔的影响，A需等待$96$比特时间（$498+96=594$比特时间）；
3. A发送数据，在$594+225=819$比特时间传输到B，在$819+576=1395$比特时间，A传输结束。

题中站点B的状态如下：

1. B在传输完干扰信号后，执行避让算法，等待$273+1\times 512=785$比特时间；
2. 受以太网帧间最小间隔的影响，B在$785 \sim 881$比特时间内先检测信道，发现在$819$比特时间时收到了来自A的数据，因此等待A传输结束；
3. 在$1395$比特时间时，A传输结束，再等待最小间隔时间后，B开始传输（即$1395+96=1491$比特时间）。

综上：A在$594$比特时间开始发送其数据帧，B在$1491$比特时间开始发送其数据帧；A重传的数据在$819$比特时间到达B；由于B在发送前检测时收到了A的数据，因此不会发送数据，所以A重传的数据不会和B重传的数据再次发生碰撞；B不会在预定的重传时间发送数据。

## 3-30

**答：**主机、服务器等按照下图的方式进行通信，则每台主机或服务器的吞吐量都为$100\text{Mbit/s}$，因此总的吞吐量为$11 \times 100\text{Mbit/s} = 1100\text{Mbit/s}$。

![image-20220930170412666](https://qihang-1306873228.cos.ap-chongqing.myqcloud.com/imgs/image-20220930170412666.png)

## 3-33

**答：**

| 动作       | 交换表的状态      | 向哪些端口转发帧 | 说明                              |
| ---------- | ----------------- | ---------------- | --------------------------------- |
| A发送帧给D | 存储A的位置(A, 1) | 所有端口         | 交换表中此时没有D的位置，因此广播 |
| D发送帧给A | 存储D的位置(D, 4) | A                | 交换表中有A的位置，直接发送       |
| E发送帧给A | 存储E的位置(E, 5) | A                | 交换表中有A的位置，直接发送       |
| A发送帧给E | 不变              | E                | 交换表中有E的位置，直接发送       |

